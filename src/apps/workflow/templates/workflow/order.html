<div class="drop-shadow-lg py-4 px-4 md:px-6 border-2 bg-white shadow-lg rounded-lg" id="order">

    <h2 class="float-left text-gray-800 text-xs mb-2"><span class="font-regular">{{ order.start_date|date:"SHORT_DATE_FORMAT" }}</span></h2>

    <!-- TODO: add generic filtering of log tables -->
    <div class="flex flex-row justify-end mb-2 px-2">
        {% if order.dfx_logs.last.status.id == 2 %}
            <span class="mdi text-lg md:text-2xl mdi-alert-circle text-red-700"></span>
        {% endif %}
        {% if order.dfx_logs.last.stage.id == 1 %}
            <span class="mdi text-lg md:text-2xl mdi-check-circle text-green-700"></span>
        {% elif order.dfx_logs.last.stage.id == 2 %}
            <span class="mdi text-lg md:text-2xl mdi-progress-check text-green-500"></span>
        {% else %}
            <span class="mdi text-lg md:text-2xl mdi-progress-clock text-grey-300"></span>
        {% endif %}
    </div>

    <div class="flex justify-between">
        <h2 class="text-gray-800 text-xs md:text-sm lg:text-md font-regular">Замовлення #<span class="font-bold">{{ order.id }}</span></h2>
        {% if order.user %}
            <h3 class="text-gray-800 text-xs md:text-sm lg:text-md font-regular">Виконувач: {{ order.user.get_username }} </h3>
        {% endif %}
    </div>
    <ul class="flex flex-col mt-2 text-sm lg:text-base">
        <li>Конфігурація: <span class="italic font-semibold">{{ order.configuration }}</span></li>
        <li>Шамотування:  <span class="italic font-semibold">{{ order.fireclay_type }}</span></li>
        <li>Скління:  <span class="italic font-semibold">{{ order.glazing_type }}</span></li>
        <li>Рама:  <span class="italic font-semibold">{{ order.frame_type }}</span></li>

        <li class="text-xs mt-2">{{ order.note }}</li>
    </ul>

    <div class="flex flex-row justify-between text-sm md:text-base gap-2 mt-4">
        <a href="{% url 'workflow:order-update' order.id %}" class="font-semibold text-blue-700 hover:underline">Редагувати</a>
        {% if order.dfx_logs.last.stage.id == 1 %}
            <button hx-target="#order"
                    hx-post="{% url 'workflow:start-job' order.id %}"
                    hx-swap="outerHTML"
                    hx-trigger="click"
                    role="button" 
                    class="font-semibold text-blue-700 bg-cyan-500 px-2 rounded-md hover:underline">
                Взяти в роботу
            </button>  
        {% elif order.dfx_logs.last.stage.id == 2 %}
            <button hx-target="#order"
                    hx-post="{% url 'workflow:finish-job' order.id %}"
                    hx-swap="outerHTML"
                    hx-trigger="click"
                    role="button" 
                    class="font-semibold text-blue-700 hover:underline">
                Закінчити роботу
            </button>  
        {% else %}
            <span class="mdi text-md sm:text-lg md:text-2xl mdi-progress-clock text-grey-300"></span>
        {% endif %}
    </div>
</div>